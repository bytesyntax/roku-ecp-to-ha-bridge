# Home Assistant automation example (legacy style)
#
# This file is kept for backwards compatibility/documentation:
#   - one webhook per action (open/close/stop)
#
# Recommended scalable approach:
#   - one webhook + one automation that routes cmd=<name>
#   - see: example/ha-automation-ecpemuserver-command-router.yaml
#
# NOTE: Some Home Assistant UIs only allow ONE automation per YAML file.
# If that is your case, do NOT use this multi-automation list format.
# Instead use the single router automation above.

- id: awning_open_via_webhook
  alias: "Awning: Open (webhook, legacy)"
  mode: single
  trigger:
    - platform: webhook
      webhook_id: awning_open
      allowed_methods: [POST, GET]
      local_only: true
  action:
    - service: cover.open_cover
      target:
        entity_id: cover.awning_controller

- id: awning_close_via_webhook
  alias: "Awning: Close (webhook, legacy)"
  mode: single
  trigger:
    - platform: webhook
      webhook_id: awning_close
      allowed_methods: [POST, GET]
      local_only: true
  action:
    - service: cover.close_cover
      target:
        entity_id: cover.awning_controller

- id: awning_stop_via_webhook
  alias: "Awning: Stop (webhook, legacy)"
  mode: single
  trigger:
    - platform: webhook
      webhook_id: awning_stop
      allowed_methods: [POST, GET]
      local_only: true
  action:
    - service: cover.stop_cover
      target:
        entity_id: cover.awning_controller